import{d as K,n as l,r as V,o as Q,b as f,e as Z,f as r,i as a,j as u,F as q,P as J,Q as i,Y as L,O as j,c as W,k as D,v as X,x as ee,Z as ae,_ as te}from"./index-bb03f45a.js";import{d as oe}from"./dialogTable-274d32d1.js";const F=v=>(X("data-v-543ca66d"),v=v(),ee(),v),le={class:"section"},de={class:"section-table"},ne={class:"form-table h-top"},re=F(()=>r("h4",{class:"title"},"Server_node",-1)),se={class:"table"},pe={class:"flex-page"},ue={class:"mt-16 form-table h-botton"},ie=F(()=>r("h4",{class:"title"},"Node_resource",-1)),ce={class:"table"},ve={class:"flex-page"},ge=K({__name:"index",setup(v){const A=l([]),z=l([]),g=V({page:1,pageSize:5}),b=V({page:1,pageSize:5}),m=l(1),y=l(5),w=l(1),N=l(5),I=l(0),k=l(0);function $(o){g.pageSize=o,h()}function B(o){g.page=o,h()}function E(o){b.pageSize=o,x()}function M(o){b.page=o,x()}function h(){let o={pageNum:g.page,pageSize:g.pageSize};J(o).then(t=>{t.code===0&&(I.value=t.total,A.value=t.data.map(e=>(e.updatedAt=i(e.updatedAt),e.createdAt=i(e.createdAt),e)))})}function x(){let o={pageNum:b.page,pageSize:b.pageSize};L(o).then(t=>{t.code===0&&(k.value=t.total,z.value=t.data.map(e=>(e.updatedAt=i(e.updatedAt),e.createdAt=i(e.createdAt),e.resourceType==="PHYSICAL_MEMORY"&&(e.total=j(e.total),e.used=j(e.used)),e)))})}const S=l("Resource List"),_=l(!1),p=l([]),C=l([]),c=l("");function Y(o){p.value=p.value.filter(t=>t.key.includes(o))}function T(o){C.value=[{prop:"key",label:"Key"},{prop:"value",label:"Value"}],n.value=typeof o!="object"?n.value:o.serverNodeId,S.value=`serverNodeId: ${n.value}`,ae({serverNodeId:n.value}).then(t=>{if(t.code===0){_.value=!0,c.value="config",p.value=[];for(let e in t.data)p.value.push({key:e,value:t.data[e]})}})}let n=l("");function R(o){n.value=typeof o!="object"?n.value:o.serverNodeId;let t={serverNodeId:n.value};C.value=[{prop:"resourceType",label:"ResourceType"},{prop:"total",label:"Total"},{prop:"used",label:"Used"},{prop:"allocated",label:"Allocated"},{prop:"status",label:"Status"},{prop:"createdAt",label:"CreatedAt"}],S.value=`serverNodeId: ${n.value}`,L(t).then(e=>{e.code===0&&(c.value="",_.value=!0,p.value=e.data.map(s=>(s.updatedAt=i(s.updatedAt),s.createdAt=i(s.createdAt),s)))})}function G(){c.value==="config"?T(n.value):R(n.value)}function H(){_.value=!1}return Q(()=>{x(),h()}),(o,t)=>{const e=f("el-table-column"),s=f("el-button"),P=f("el-table"),U=f("el-pagination");return W(),Z(q,null,[r("section",le,[r("div",de,[r("div",ne,[re,r("div",se,[a(P,{data:A.value,"max-height":"300"},{default:u(()=>[a(e,{prop:"serverNodeId",fixed:"left",label:"ServerNodeId",width:"150px"}),a(e,{prop:"name",label:"Name",width:"100px"}),a(e,{prop:"serverClusterId",width:"150px",label:"ServerClusterId"}),a(e,{prop:"host",label:"Host"}),a(e,{prop:"port",label:"Port",width:"120px"}),a(e,{prop:"nodeType",label:"Type"}),a(e,{prop:"status",label:"Status",width:"120px"}),a(e,{prop:"createdAt",label:"CreatedAt",width:"170"}),a(e,{prop:"updatedAt",label:"UpdatedAt",width:"170"}),a(e,{fixed:"right",label:"Config",width:"120"},{default:u(d=>[a(s,{link:"",type:"primary",onClick:O=>T(d.row)},{default:u(()=>[D("Get Config")]),_:2},1032,["onClick"])]),_:1}),a(e,{fixed:"right",label:"Resource",width:"120"},{default:u(d=>[a(s,{link:"",type:"primary",onClick:O=>R(d.row)},{default:u(()=>[D("Get Resource")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),r("div",pe,[a(U,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":m.value,"onUpdate:currentAge":t[0]||(t[0]=d=>m.value=d),"page-size":y.value,"onUpdate:pageSize":t[1]||(t[1]=d=>y.value=d),"page-sizes":[5,10,20,50],total:I.value,onSizeChange:$,onCurrentChange:B},null,8,["current-age","page-size","total"])])])]),r("div",ue,[ie,r("div",ce,[a(P,{data:z.value,"max-height":"350"},{default:u(()=>[a(e,{prop:"resourceId",fixed:"left",label:"Resource_id",width:"120px"}),a(e,{prop:"serverNodeId",fixed:"left",label:"Server_node_id",width:"150px"}),a(e,{prop:"resourceType",label:"Resource_type"}),a(e,{prop:"total",label:"Total",width:"150px"}),a(e,{prop:"used",label:"Used",width:"150px"}),a(e,{prop:"allocated",label:"Allocated",width:"150px"}),a(e,{prop:"status",label:"Status",width:"150px"}),a(e,{prop:"extention",label:"Extention"}),a(e,{prop:"createdAt",label:"CreatedAt",width:"190"}),a(e,{prop:"updatedAt",label:"UpdatedAt",width:"190"})]),_:1},8,["data"]),r("div",ve,[a(U,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":w.value,"onUpdate:currentAge":t[2]||(t[2]=d=>w.value=d),"page-size":N.value,"onUpdate:pageSize":t[3]||(t[3]=d=>N.value=d),"page-sizes":[5,10,20,50],total:k.value,onSizeChange:E,onCurrentChange:M},null,8,["current-age","page-size","total"])])])])])]),a(oe,{title:S.value,dialogVisible:_.value,tableData:p.value,tableLabel:C.value,width:c.value==="config"?"50%":"90%",needSearch:c.value==="config",onUpdateVisiable:H,onRefresh:G,onSearchConfig:Y},null,8,["title","dialogVisible","tableData","tableLabel","width","needSearch"])],64)}}});const fe=te(ge,[["__scopeId","data-v-543ca66d"]]);export{fe as default};
