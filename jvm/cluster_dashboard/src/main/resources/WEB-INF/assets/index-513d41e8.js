import{d as F,r as x,j as c,k as K,b as i,c as j,g as e,w as a,e as H,E as f,L as $,o as G,h as d,M as q,I as T,G as J,_ as Q}from"./index-bb41d397.js";import{d as X}from"./dialogTable-dec50cfc.js";const Z={class:"section"},ee={class:"table"},te=F({__name:"index",setup(ae){const o=x({sessionId:"",status:"",createTime:""});function V(l){return!["PREPARE","NEW","ACTIVE"].includes(l.status)}const I=c([]),p=x({page:1,pageSize:15}),E=c(1),S=c(15),h=c(0);function w(l){p.pageSize=l,_()}function k(l){p.page=l,_()}function y(){p.page=1,p.pageSize=15,_()}function P(l){q({sessionId:l.sessionId}).then(t=>{t.code===0?(T.success(t.msg||t.data),_()):T.success(t.msg)})}const R=c("Processor List"),v=c(!1),A=c([]),z=[{prop:"processorId",label:"Processor Id",width:"120px"},{prop:"sessionId",label:"Session Id",width:"380px"},{prop:"serverNodeId",label:"Server_node_id",width:"150px"},{prop:"processorType",label:"Type",width:"100px"},{prop:"status",label:"Status",width:"110px"},{prop:"commandEndpoint",label:"Command_endpoint",width:"180px"},{prop:"transferEndpoint",label:"Transfer_endpoint",width:"170px"},{prop:"pid",label:"Pid"},{prop:"updatedAt",label:"UpdatedAt",width:"170px"},{prop:"processorOption",label:"Processor_option",width:"690px"}];let m="";function C(l){v.value=!0,m=typeof l=="string"?m:l.row.sessionId,J({sessionId:m}).then(t=>{t.code===0&&(A.value=t.data.map(s=>(s.updatedAt=f(s.updatedAt),s.createdAt=f(s.createdAt),s)))})}function D(){C(m)}function N(){v.value=!1}function L(){p.page=1,p.pageSize=10,o.createTime="",o.sessionId="",o.status="",_()}function _(){let l={page:p.page,pageSize:p.pageSize,sessionId:o.sessionId,status:o.status,createAt:o.createTime?f(o.createTime,"YYYY-MM-DD"):""};$(l).then(t=>{t.code===0&&(h.value=t.total,I.value=t.data.map(s=>(s.updatedAt=f(s.updatedAt),s.createdAt=f(s.createdAt),s)))})}return K(()=>{_()}),(l,t)=>{const s=i("el-input"),b=i("el-form-item"),r=i("el-option"),U=i("el-select"),M=i("el-date-picker"),g=i("el-button"),O=i("el-form"),u=i("el-table-column"),W=i("el-table"),Y=i("el-pagination");return G(),j("div",Z,[e(O,{model:o,class:"search-from"},{default:a(()=>[e(b,{label:"Session ID"},{default:a(()=>[e(s,{modelValue:o.sessionId,"onUpdate:modelValue":t[0]||(t[0]=n=>o.sessionId=n),clearable:""},null,8,["modelValue"])]),_:1}),e(b,{label:"Status"},{default:a(()=>[e(U,{modelValue:o.status,"onUpdate:modelValue":t[1]||(t[1]=n=>o.status=n),clearable:"",filterable:""},{default:a(()=>[e(r,{value:"NEW"},{default:a(()=>[d("NEW")]),_:1}),e(r,{value:"NEW_TIMEOUT"},{default:a(()=>[d("NEW_TIMEOUT")]),_:1}),e(r,{value:"ACTIVE"},{default:a(()=>[d("ACTIVE")]),_:1}),e(r,{value:"CLOSED"},{default:a(()=>[d("CLOSED")]),_:1}),e(r,{value:"KILLED"},{default:a(()=>[d("KILLED")]),_:1}),e(r,{value:"ERROR"},{default:a(()=>[d("ERROR")]),_:1}),e(r,{value:"FINISHED"},{default:a(()=>[d("FINISHED")]),_:1}),e(r,{value:"PREPARE"},{default:a(()=>[d("PREPARE")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"CreatedAt"},{default:a(()=>[e(M,{modelValue:o.createTime,"onUpdate:modelValue":t[2]||(t[2]=n=>o.createTime=n),type:"date",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(b,null,{default:a(()=>[e(g,{type:"primary",onClick:y},{default:a(()=>[d("Search")]),_:1}),e(g,{type:"primary",onClick:L},{default:a(()=>[d("Refresh")]),_:1})]),_:1})]),_:1},8,["model"]),H("div",ee,[e(W,{data:I.value},{default:a(()=>[e(u,{prop:"sessionId",label:"Session Id",width:"390px"}),e(u,{prop:"name",label:"Name"}),e(u,{prop:"totalProcCount",label:"Total"}),e(u,{prop:"activeProcCount",label:"ActionTotal"}),e(u,{prop:"status",label:"Status"}),e(u,{prop:"createdAt",label:"CreatedAt"}),e(u,{prop:"updatedAt",label:"UpdatedAt"}),e(u,{fixed:"right",label:"Action",width:"180"},{default:a(n=>[e(g,{link:"",type:"primary",onClick:B=>C(n)},{default:a(()=>[d("processor信息")]),_:2},1032,["onClick"]),e(g,{link:"",type:"primary",disabled:V(n.row),onClick:B=>P(n.row)},{default:a(()=>[d("kill")]),_:2},1032,["disabled","onClick"])]),_:1})]),_:1},8,["data"]),e(Y,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":E.value,"onUpdate:currentAge":t[3]||(t[3]=n=>E.value=n),"page-size":S.value,"onUpdate:pageSize":t[4]||(t[4]=n=>S.value=n),"page-sizes":[10,15,30,50],total:h.value,onSizeChange:w,onCurrentChange:k},null,8,["current-age","page-size","total"])]),e(X,{title:R.value,dialogVisible:v.value,tableData:A.value,tableLabel:z,onUpdateVisiable:N,onRefresh:D},null,8,["title","dialogVisible","tableData"])])}}});const se=Q(te,[["__scopeId","data-v-5f7e0011"]]);export{se as default};
