import{d as F,j as _,r as C,k as G,b as p,c as H,g as e,w as o,e as j,E as b,G as K,o as W,h as i,H as $,I as k,J,_ as q}from"./index-04664782.js";import{d as Q}from"./dialogTable-0465fdf7.js";const X={class:"section"},Z={class:"table"},ee=F({__name:"index",setup(te){const I=_([]),u=C({page:1,pageSize:5});function w(s){$({processorId:s.processorId}).then(t=>{t.code===0&&(k.success(t.msg),m()),k.success(t.msg)})}const a=C({pid:"",sessionId:"",status:"",createTime:""}),S=_(1),h=_(5),x=_(0);function y(s){u.pageSize=s,m()}function A(s){u.page=s,m()}function E(){u.page=1,u.pageSize=5,m()}function P(){a.createTime="",a.pid="",a.sessionId="",a.status="",u.page=1,u.pageSize=5,m()}function m(){let s={page:u.page,pageSize:u.pageSize,pid:a.pid?Number(a.pid):"",sessionId:a.sessionId,createAt:a.createTime?b(a.createTime,"YYYY-MM-DD"):"",status:a.status};K(s).then(t=>{t.code===0&&(x.value=t.total,I.value=t.data.map(n=>(n.updatedAt=b(n.updatedAt),n.createdAt=b(n.createdAt),n)))})}const T=_("Resource List"),v=_(!1),N=_([]),z=[{prop:"processorId",label:"Processor Id"},{prop:"sessionId",label:"Session Id"},{prop:"serverNodeId",label:"Server_node_id"},{prop:"resourceType",label:"Type"},{prop:"status",label:"Status"},{prop:"allocated",label:"Allocated"},{prop:"extention",label:"Extention"},{prop:"pid",label:"Pid"},{prop:"createdAt",label:"CreatedAt"},{prop:"updatedAt",label:"UpdatedAt"}];let c={sessionId:"",serverNodeId:""};function V(s){v.value=!0,c.sessionId=s.row===void 0?c.sessionId:s.row.sessionId,c.serverNodeId=s.row===void 0?c.serverNodeId:s.row.serverNodeId;let t={sessionId:c.sessionId,serverNodeId:c.serverNodeId};J(t).then(n=>{n.code===0&&(N.value=n.data.map(d=>(d.updatedAt=b(d.updatedAt),d.createdAt=b(d.createdAt),d)))})}function D(){V(c)}function R(){v.value=!1}return G(()=>{m()}),(s,t)=>{const n=p("el-input"),d=p("el-form-item"),f=p("el-option"),U=p("el-select"),L=p("el-date-picker"),g=p("el-button"),O=p("el-form"),r=p("el-table-column"),M=p("el-table"),Y=p("el-pagination");return W(),H("section",X,[e(O,{model:a,class:"search-from"},{default:o(()=>[e(d,{label:"Pid"},{default:o(()=>[e(n,{modelValue:a.pid,"onUpdate:modelValue":t[0]||(t[0]=l=>a.pid=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"Session ID"},{default:o(()=>[e(n,{modelValue:a.sessionId,"onUpdate:modelValue":t[1]||(t[1]=l=>a.sessionId=l)},null,8,["modelValue"])]),_:1}),e(d,{label:"Status"},{default:o(()=>[e(U,{modelValue:a.status,"onUpdate:modelValue":t[2]||(t[2]=l=>a.status=l)},{default:o(()=>[e(f,{value:"NEW"},{default:o(()=>[i("NEW")]),_:1}),e(f,{value:"RUNNING"},{default:o(()=>[i("RUNNING")]),_:1}),e(f,{value:"STOPPED"},{default:o(()=>[i("STOPPED")]),_:1}),e(f,{value:"KILLED"},{default:o(()=>[i("KILLED")]),_:1}),e(f,{value:"ERROR"},{default:o(()=>[i("ERROR")]),_:1}),e(f,{value:"FINISHED"},{default:o(()=>[i("FINISHED")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"CreatedAt"},{default:o(()=>[e(L,{modelValue:a.createTime,"onUpdate:modelValue":t[3]||(t[3]=l=>a.createTime=l),style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(d,null,{default:o(()=>[e(g,{type:"primary",onClick:E},{default:o(()=>[i("Search")]),_:1}),e(g,{type:"primary",onClick:P},{default:o(()=>[i("Refresh")]),_:1})]),_:1})]),_:1},8,["model"]),j("div",Z,[e(M,{data:I.value},{default:o(()=>[e(r,{prop:"processorId",fixed:"left",label:"Processor_id",width:"140px"}),e(r,{prop:"sessionId",label:"Session Id",width:"390px"}),e(r,{prop:"serverNodeId",label:"Server_node_id",width:"190px"}),e(r,{prop:"processorType",label:"Type",width:"110px"}),e(r,{prop:"status",label:"Status",width:"120px"}),e(r,{prop:"commandEndpoint",label:"Command_endpoint",width:"190px"}),e(r,{prop:"transferEndpoint",label:"Transfer_endpoin",width:"190px"}),e(r,{prop:"processorOption",label:"Processor_option",width:"690px"}),e(r,{prop:"pid",label:"Pid"}),e(r,{fixed:"right",label:"action",width:"180"},{default:o(l=>[e(g,{link:"",type:"primary",onClick:B=>V(l)},{default:o(()=>[i("resource信息")]),_:2},1032,["onClick"]),e(g,{link:"",type:"primary",onClick:B=>w(l.row)},{default:o(()=>[i("kill")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(Y,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":S.value,"onUpdate:currentAge":t[4]||(t[4]=l=>S.value=l),"page-size":h.value,"onUpdate:pageSize":t[5]||(t[5]=l=>h.value=l),"page-sizes":[5,10,20,50],total:x.value,onSizeChange:y,onCurrentChange:A},null,8,["current-age","page-size","total"]),e(Q,{title:T.value,dialogVisible:v.value,tableData:N.value,tableLabel:z,onUpdateVisiable:R,onRefresh:D},null,8,["title","dialogVisible","tableData"])])])}}});const le=q(ee,[["__scopeId","data-v-910a2b6c"]]);export{le as default};
