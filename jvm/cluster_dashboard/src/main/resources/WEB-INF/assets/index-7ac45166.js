import{d as K,r as w,j as c,k as j,a as i,c as H,b as g,f as e,w as a,E as f,L as $,o as G,g as d,M as q,I as T,G as J,_ as Q}from"./index-9c33e607.js";import{d as X}from"./dialogTable-8fabd64d.js";const Z={class:"section"},ee={class:"section-table"},te={class:"form-table"},ae={class:"action-btn"},oe={class:"table"},le=K({__name:"index",setup(se){const o=w({sessionId:"",status:"",createTime:""});function V(l){return!["PREPARE","NEW","ACTIVE"].includes(l.status)}const I=c([]),p=w({page:1,pageSize:15}),E=c(1),S=c(15),x=c(0);function k(l){p.pageSize=l,_()}function y(l){p.page=l,_()}function P(){p.page=1,p.pageSize=15,_()}function R(l){q({sessionId:l.sessionId}).then(t=>{t.code===0?(T.success(t.msg||t.data),_()):T.success(t.msg)})}const z=c("Processor List"),v=c(!1),A=c([]),D=[{prop:"processorId",label:"Processor Id",width:"120px"},{prop:"sessionId",label:"Session Id",width:"380px"},{prop:"serverNodeId",label:"Server_node_id",width:"150px"},{prop:"processorType",label:"Type",width:"100px"},{prop:"status",label:"Status",width:"110px"},{prop:"commandEndpoint",label:"Command_endpoint",width:"180px"},{prop:"transferEndpoint",label:"Transfer_endpoint",width:"170px"},{prop:"pid",label:"Pid"},{prop:"updatedAt",label:"UpdatedAt",width:"170px"},{prop:"processorOption",label:"Processor_option",width:"690px"}];let m="";function C(l){v.value=!0,m=typeof l=="string"?m:l.row.sessionId,J({sessionId:m}).then(t=>{t.code===0&&(A.value=t.data.map(s=>(s.updatedAt=f(s.updatedAt),s.createdAt=f(s.createdAt),s)))})}function N(){C(m)}function L(){v.value=!1}function M(){p.page=1,p.pageSize=10,o.createTime="",o.sessionId="",o.status="",_()}function _(){let l={pageNum:p.page,pageSize:p.pageSize,sessionId:o.sessionId,status:o.status,createAt:o.createTime?f(o.createTime,"YYYY-MM-DD"):""};$(l).then(t=>{t.code===0&&(x.value=t.total,I.value=t.data.map(s=>(s.updatedAt=f(s.updatedAt),s.createdAt=f(s.createdAt),s)))})}return j(()=>{_()}),(l,t)=>{const s=i("el-input"),h=i("el-form-item"),r=i("el-option"),U=i("el-select"),O=i("el-date-picker"),b=i("el-button"),W=i("el-form"),u=i("el-table-column"),Y=i("el-table"),B=i("el-pagination");return G(),H("div",Z,[g("div",ee,[g("div",te,[e(W,{model:o,class:"search-from"},{default:a(()=>[e(h,{label:"Session ID",class:"input-width"},{default:a(()=>[e(s,{modelValue:o.sessionId,"onUpdate:modelValue":t[0]||(t[0]=n=>o.sessionId=n),modelModifiers:{trim:!0},clearable:""},null,8,["modelValue"])]),_:1}),e(h,{label:"Status"},{default:a(()=>[e(U,{modelValue:o.status,"onUpdate:modelValue":t[1]||(t[1]=n=>o.status=n),clearable:"",filterable:""},{default:a(()=>[e(r,{value:"NEW"},{default:a(()=>[d("NEW")]),_:1}),e(r,{value:"NEW_TIMEOUT"},{default:a(()=>[d("NEW_TIMEOUT")]),_:1}),e(r,{value:"ACTIVE"},{default:a(()=>[d("ACTIVE")]),_:1}),e(r,{value:"CLOSED"},{default:a(()=>[d("CLOSED")]),_:1}),e(r,{value:"KILLED"},{default:a(()=>[d("KILLED")]),_:1}),e(r,{value:"ERROR"},{default:a(()=>[d("ERROR")]),_:1}),e(r,{value:"FINISHED"},{default:a(()=>[d("FINISHED")]),_:1}),e(r,{value:"PREPARE"},{default:a(()=>[d("PREPARE")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(h,{label:"CreatedAt"},{default:a(()=>[e(O,{modelValue:o.createTime,"onUpdate:modelValue":t[2]||(t[2]=n=>o.createTime=n),type:"date",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),g("div",ae,[e(b,{type:"primary",onClick:P},{default:a(()=>[d("Search")]),_:1}),e(b,{type:"primary",onClick:M},{default:a(()=>[d("Refresh")]),_:1})])]),_:1},8,["model"]),g("div",oe,[e(Y,{data:I.value,"max-height":"750px"},{default:a(()=>[e(u,{prop:"sessionId",label:"Session Id",fixed:"left",width:"420px"}),e(u,{prop:"name",label:"Name"}),e(u,{prop:"totalProcCount",label:"Total"}),e(u,{prop:"activeProcCount",label:"ActionTotal",width:"110px"}),e(u,{prop:"status",label:"Status"}),e(u,{prop:"createdAt",label:"CreatedAt",width:"180px"}),e(u,{prop:"updatedAt",label:"UpdatedAt",width:"180px"}),e(u,{fixed:"right",label:"Action",width:"180"},{default:a(n=>[e(b,{link:"",type:"primary",onClick:F=>C(n)},{default:a(()=>[d("processor信息")]),_:2},1032,["onClick"]),e(b,{link:"",type:"primary",disabled:V(n.row),onClick:F=>R(n.row)},{default:a(()=>[d("kill")]),_:2},1032,["disabled","onClick"])]),_:1})]),_:1},8,["data"]),e(B,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":E.value,"onUpdate:currentAge":t[3]||(t[3]=n=>E.value=n),"page-size":S.value,"onUpdate:pageSize":t[4]||(t[4]=n=>S.value=n),"page-sizes":[10,15,30,50],total:x.value,onSizeChange:k,onCurrentChange:y},null,8,["current-age","page-size","total"])])])]),e(X,{title:z.value,dialogVisible:v.value,tableData:A.value,tableLabel:D,onUpdateVisiable:L,onRefresh:N},null,8,["title","dialogVisible","tableData"])])}}});const ie=Q(le,[["__scopeId","data-v-1905f755"]]);export{ie as default};
