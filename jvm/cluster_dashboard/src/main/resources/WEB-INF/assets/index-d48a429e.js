import{d as K,n as l,r as V,o as Q,b as h,e as Z,f as n,i as a,j as u,F as q,P as J,Q as i,Y as L,O as j,c as W,k as D,v as X,x as ee,Z as ae,_ as te}from"./index-fe241cd5.js";import{d as oe}from"./dialogTable-1fe4d793.js";const F=v=>(X("data-v-7f376748"),v=v(),ee(),v),le={class:"section"},de={class:"section-table"},re={class:"form-table h-top"},ne=F(()=>n("h4",{class:"title"},"Server_node",-1)),se={class:"table"},pe={class:"flex-page"},ue={class:"mt-16 form-table h-botton"},ie=F(()=>n("h4",{class:"title"},"Node_resource",-1)),ce={class:"table"},ve={class:"flex-page"},ge=K({__name:"index",setup(v){const A=l([]),z=l([]),g=V({page:1,pageSize:5}),f=V({page:1,pageSize:5}),m=l(1),y=l(5),w=l(1),N=l(5),I=l(0),T=l(0);function $(o){g.pageSize=o,_()}function B(o){g.page=o,_()}function E(o){f.pageSize=o,x()}function M(o){f.page=o,x()}function _(){let o={pageNum:g.page,pageSize:g.pageSize};J(o).then(t=>{t.code===0&&(I.value=t.total,A.value=t.data.map(e=>(e.updatedAt=i(e.updatedAt),e.createdAt=i(e.createdAt),e)))})}function x(){let o={pageNum:f.page,pageSize:f.pageSize};L(o).then(t=>{t.code===0&&(T.value=t.total,z.value=t.data.map(e=>(e.updatedAt=i(e.updatedAt),e.createdAt=i(e.createdAt),e.resourceType==="PHYSICAL_MEMORY"&&(e.total=j(e.total),e.used=j(e.used)),e)))})}const S=l("Resource List"),b=l(!1),p=l([]),C=l([]),c=l("");function Y(o){p.value=p.value.filter(t=>t.key.includes(o))}function k(o){C.value=[{prop:"key",label:"Key"},{prop:"value",label:"Value"}],r.value=typeof o!="object"?r.value:o.serverNodeId,S.value=`serverNodeId: ${r.value}`,ae({serverNodeId:r.value}).then(t=>{if(t.code===0){b.value=!0,c.value="config",p.value=[];for(let e in t.data)p.value.push({key:e,value:t.data[e]})}})}let r=l("");function R(o){r.value=typeof o!="object"?r.value:o.serverNodeId;let t={serverNodeId:r.value};C.value=[{prop:"resourceType",label:"ResourceType"},{prop:"total",label:"Total"},{prop:"used",label:"Used"},{prop:"allocated",label:"Allocated"},{prop:"status",label:"Status"},{prop:"createdAt",label:"CreatedAt"}],S.value=`serverNodeId: ${r.value}`,L(t).then(e=>{e.code===0&&(c.value="",b.value=!0,p.value=e.data.map(s=>(s.updatedAt=i(s.updatedAt),s.createdAt=i(s.createdAt),s)))})}function G(){c.value==="config"?k(r.value):R(r.value)}function H(){b.value=!1}return Q(()=>{x(),_()}),(o,t)=>{const e=h("el-table-column"),s=h("el-button"),P=h("el-table"),U=h("el-pagination");return W(),Z(q,null,[n("section",le,[n("div",de,[n("div",re,[ne,n("div",se,[a(P,{data:A.value,"max-height":"300"},{default:u(()=>[a(e,{prop:"serverNodeId",fixed:"left",label:"ServerNodeId",width:"150px"}),a(e,{prop:"name",label:"Name",width:"100px"}),a(e,{prop:"serverClusterId",width:"150px",label:"ServerClusterId"}),a(e,{prop:"host",label:"Host"}),a(e,{prop:"port",label:"Port",width:"120px"}),a(e,{prop:"nodeType",label:"Type"}),a(e,{prop:"status",label:"Status",width:"120px"}),a(e,{prop:"createdAt",label:"CreatedAt",width:"170"}),a(e,{prop:"updatedAt",label:"UpdatedAt",width:"170"}),a(e,{fixed:"right",label:"Config",width:"120"},{default:u(d=>[a(s,{link:"",type:"primary",onClick:O=>k(d.row)},{default:u(()=>[D("Get Config")]),_:2},1032,["onClick"])]),_:1}),a(e,{fixed:"right",label:"Resource",width:"120"},{default:u(d=>[a(s,{link:"",type:"primary",onClick:O=>R(d.row)},{default:u(()=>[D("Get Resource")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),n("div",pe,[a(U,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":m.value,"onUpdate:currentAge":t[0]||(t[0]=d=>m.value=d),"page-size":y.value,"onUpdate:pageSize":t[1]||(t[1]=d=>y.value=d),"page-sizes":[5,10,20,50],total:I.value,onSizeChange:$,onCurrentChange:B},null,8,["current-age","page-size","total"])])])]),n("div",ue,[ie,n("div",ce,[a(P,{data:z.value,"max-height":"350"},{default:u(()=>[a(e,{prop:"resourceId",fixed:"left",label:"ResourceId",width:"120px"}),a(e,{prop:"serverNodeId",fixed:"left",label:"ServerNodeId",width:"150px"}),a(e,{prop:"resourceType",label:"ResourceType"}),a(e,{prop:"total",label:"Total",width:"150px"}),a(e,{prop:"used",label:"Used",width:"150px"}),a(e,{prop:"allocated",label:"Allocated",width:"150px"}),a(e,{prop:"status",label:"Status",width:"150px"}),a(e,{prop:"extention",label:"Extention"}),a(e,{prop:"createdAt",label:"CreatedAt",width:"190"}),a(e,{prop:"updatedAt",label:"UpdatedAt",width:"190"})]),_:1},8,["data"]),n("div",ve,[a(U,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":w.value,"onUpdate:currentAge":t[2]||(t[2]=d=>w.value=d),"page-size":N.value,"onUpdate:pageSize":t[3]||(t[3]=d=>N.value=d),"page-sizes":[5,10,20,50],total:T.value,onSizeChange:E,onCurrentChange:M},null,8,["current-age","page-size","total"])])])])])]),a(oe,{title:S.value,dialogVisible:b.value,tableData:p.value,tableLabel:C.value,width:c.value==="config"?"50%":"90%",needSearch:c.value==="config",onUpdateVisiable:H,onRefresh:G,onSearchConfig:Y},null,8,["title","dialogVisible","tableData","tableLabel","width","needSearch"])],64)}}});const he=te(ge,[["__scopeId","data-v-7f376748"]]);export{he as default};
