import{d as O,j as l,r as P,k as q,b as f,c as J,e as i,g as a,w as s,F as Q,z as W,E as u,N as L,o as X,h as j,p as Y,n as Z,O as ee,_ as ae}from"./index-bb41d397.js";import{d as te}from"./dialogTable-dec50cfc.js";const D=v=>(Y("data-v-9c52f6ad"),v=v(),Z(),v),oe={class:"section"},le=D(()=>i("h4",{class:"title"},"Server_node",-1)),ne={class:"table"},re={class:"section"},de=D(()=>i("h4",{class:"title"},"Node_resource",-1)),pe={class:"table"},se=O({__name:"index",setup(v){const z=l([]),x=l([]),g=P({page:1,pageSize:5}),b=P({page:1,pageSize:5}),y=l(1),m=l(5),w=l(1),N=l(5),I=l(0),k=l(0);function $(o){g.pageSize=o,h()}function B(o){g.page=o,h()}function E(o){b.pageSize=o,S()}function F(o){b.page=o,S()}function h(){let o={page:g.page,pageSize:g.pageSize};W(o).then(t=>{t.code===0&&(I.value=t.total,z.value=t.data.map(e=>(e.updatedAt=u(e.updatedAt),e.createdAt=u(e.createdAt),e)))})}function S(){let o={page:b.page,pageSize:b.pageSize};L(o).then(t=>{t.code===0&&(k.value=t.total,x.value=t.data.map(e=>(e.updatedAt=u(e.updatedAt),e.createdAt=u(e.createdAt),e)))})}const C=l("Resource List"),_=l(!1),p=l([]),A=l([]),c=l("");function G(o){p.value=p.value.filter(t=>t.key.includes(o))}function T(o){A.value=[{prop:"key",label:"Key"},{prop:"value",label:"Value"}],r.value=typeof o!="object"?r.value:o.serverNodeId,C.value=`serverNodeId: ${r.value}`,ee({serverNodeId:r.value}).then(t=>{if(t.code===0){_.value=!0,c.value="config",p.value=[];for(let e in t.data)p.value.push({key:e,value:t.data[e]})}})}let r=l("");function R(o){r.value=typeof o!="object"?r.value:o.serverNodeId;let t={serverNodeId:r.value};A.value=[{prop:"resourceType",label:"ResourceType"},{prop:"total",label:"Total"},{prop:"used",label:"Used"},{prop:"allocated",label:"Allocated"},{prop:"status",label:"Status"},{prop:"createdAt",label:"CreatedAt"}],C.value=`serverNodeId: ${r.value}`,L(t).then(e=>{e.code===0&&(c.value="",_.value=!0,p.value=e.data.map(d=>(d.updatedAt=u(d.updatedAt),d.createdAt=u(d.createdAt),d)))})}function H(){c.value==="config"?T(r.value):R(r.value)}function K(){_.value=!1}return q(()=>{S(),h()}),(o,t)=>{const e=f("el-table-column"),d=f("el-button"),U=f("el-table"),V=f("el-pagination");return X(),J(Q,null,[i("section",oe,[le,i("div",ne,[a(U,{data:z.value},{default:s(()=>[a(e,{prop:"serverNodeId",width:"140px",label:"Server_node_id"}),a(e,{prop:"name",label:"Name"}),a(e,{prop:"serverClusterId",width:"150px",label:"Server_cluster_id"}),a(e,{prop:"host",label:"Host"}),a(e,{prop:"port",label:"Port"}),a(e,{prop:"nodeType",label:"Type",width:"150px"}),a(e,{prop:"status",label:"Status"}),a(e,{prop:"createdAt",label:"CreatedAt",width:"180"}),a(e,{prop:"updatedAt",label:"UpdatedAt",width:"180"}),a(e,{fixed:"right",label:"Config",width:"180"},{default:s(n=>[a(d,{link:"",type:"primary",onClick:M=>T(n.row)},{default:s(()=>[j("Get Config")]),_:2},1032,["onClick"])]),_:1}),a(e,{fixed:"right",label:"Resource",width:"180"},{default:s(n=>[a(d,{link:"",type:"primary",onClick:M=>R(n.row)},{default:s(()=>[j("Get Resource")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(V,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":y.value,"onUpdate:currentAge":t[0]||(t[0]=n=>y.value=n),"page-size":m.value,"onUpdate:pageSize":t[1]||(t[1]=n=>m.value=n),"page-sizes":[5,10,20,50],total:I.value,onSizeChange:$,onCurrentChange:B},null,8,["current-age","page-size","total"])])]),i("section",re,[de,i("div",pe,[a(U,{data:x.value},{default:s(()=>[a(e,{prop:"resourceId",label:"Resource_id",width:"120px"}),a(e,{prop:"serverNodeId",label:"Server_node_id",width:"150px"}),a(e,{prop:"resourceType",label:"Resource_type",width:"180px"}),a(e,{prop:"total",label:"Total"}),a(e,{prop:"used",label:"Used"}),a(e,{prop:"allocated",label:"Allocated"}),a(e,{prop:"status",label:"Status"}),a(e,{prop:"extention",label:"Extention"}),a(e,{prop:"createdAt",label:"CreatedAt",width:"180"}),a(e,{prop:"updatedAt",label:"UpdatedAt",width:"180"})]),_:1},8,["data"]),a(V,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":w.value,"onUpdate:currentAge":t[2]||(t[2]=n=>w.value=n),"page-size":N.value,"onUpdate:pageSize":t[3]||(t[3]=n=>N.value=n),"page-sizes":[5,10,20,50],total:k.value,onSizeChange:E,onCurrentChange:F},null,8,["current-age","page-size","total"])])]),a(te,{title:C.value,dialogVisible:_.value,tableData:p.value,tableLabel:A.value,width:c.value==="config"?"50%":"90%",needSearch:c.value==="config",onUpdateVisiable:K,onRefresh:H,onSearchConfig:G},null,8,["title","dialogVisible","tableData","tableLabel","width","needSearch"])],64)}}});const ce=ae(se,[["__scopeId","data-v-9c52f6ad"]]);export{ce as default};
