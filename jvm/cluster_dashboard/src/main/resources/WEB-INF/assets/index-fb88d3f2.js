import{b as R,d as I,c as B}from"./filter-12cf1072.js";import{d as D,a as L,u as F,j as l,r as V,l as j,b as c,o as d,c as g,f as U,g as t,w as m,i as $,e as i,F as y,m as E,q as M,s as O,p as G,_ as H}from"./index-f0fc38c8.js";import{c as J}from"./clusterCard-1afdfbed.js";const z=u=>(M("data-v-44548684"),u=u(),O(),u),K={key:0,class:"section mb-16"},Q=z(()=>i("h4",{class:"title"},"Cluster",-1)),T={class:"section"},W=z(()=>i("h4",{class:"title"},"processor",-1)),X={class:"table"},Y=D({__name:"index",setup(u){const S=L(),o=F(),f=l([]),p=V({page:1,pageSize:5}),b=l(1),v=l(5),h=l(0);function w(e){p.pageSize=e,_()}function q(e){S.push(`/node?sessionId=${e.sessionId}&serverNodeId=${Number(o.query.id)}`)}function x(e){p.page=e,_()}function _(){let e={page:p.page,pageSize:p.pageSize};o.query.id&&(e.nodeNum=Number(o.query.id)),o.query.sessionId&&(e.sessionId=o.query.sessionId,e.nodeNum=0),R(e).then(a=>{a.code===0&&(h.value=a.total,f.value=a.data.map(n=>(n.updatedAt=I(n.updatedAt),n.createdAt=I(n.createdAt),n)))})}const C=l([]);function N(){let e={nodeNum:0,sessionId:o.query.sessionId};B(e).then(a=>{a.code===0&&(C.value=a.data)})}return j(()=>{_(),o.query.sessionId&&N()}),(e,a)=>{const n=c("el-col"),k=c("el-row"),s=c("el-table-column"),A=c("el-table"),P=c("el-pagination");return d(),g(y,null,[U(o).query.sessionId?(d(),g("section",K,[Q,t(k,null,{default:m(()=>[(d(!0),g(y,null,E(C.value,r=>(d(),G(n,{span:8,key:r},{default:m(()=>[t(J,{item:r},null,8,["item"])]),_:2},1024))),128))]),_:1})])):$("",!0),i("section",T,[W,i("div",X,[t(A,{data:f.value,border:"",onRowClick:q},{default:m(()=>[t(s,{prop:"activeProcCount",label:"资源ID"}),t(s,{prop:"name",label:"服务器节点ID"}),t(s,{prop:"sessionId",label:"总数",width:"260"}),t(s,{prop:"tag",label:"已使用数"}),t(s,{prop:"totalProcCount",label:"预分配数"}),t(s,{prop:"status",label:"状态"}),t(s,{prop:"createdAt",label:"创建时间",width:"180"}),t(s,{prop:"updatedAt",label:"更新时间",width:"180"})]),_:1},8,["data"]),t(P,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":b.value,"onUpdate:currentAge":a[0]||(a[0]=r=>b.value=r),"page-size":v.value,"onUpdate:pageSize":a[1]||(a[1]=r=>v.value=r),"page-sizes":[5,10,20,50],total:h.value,onSizeChange:w,onCurrentChange:x},null,8,["current-age","page-size","total"])])])],64)}}});const ae=H(Y,[["__scopeId","data-v-44548684"]]);export{ae as default};
