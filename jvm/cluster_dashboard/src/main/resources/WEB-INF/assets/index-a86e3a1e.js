import{d as B,r as x,j as c,k as F,b as p,c as j,g as e,w as a,e as H,E as f,L as K,o as $,h as n,M as G,I as T,G as q,_ as J}from"./index-04664782.js";import{d as Q}from"./dialogTable-0465fdf7.js";const X={class:"section"},Z={class:"table"},ee=B({__name:"index",setup(te){const o=x({sessionId:"",status:"",createTime:""}),I=c([]),i=x({page:1,pageSize:15}),S=c(1),h=c(15),E=c(0);function V(d){i.pageSize=d,_()}function k(d){i.page=d,_()}function w(){i.page=1,i.pageSize=15,_()}function y(d){G({sessionId:d.sessionId}).then(t=>{t.code===0&&(T.success(t.msg),_()),T.success(t.msg)})}const z=c("Processor List"),v=c(!1),C=c([]),D=[{prop:"processorId",label:"Processor Id",width:"120px"},{prop:"sessionId",label:"Session Id",width:"380px"},{prop:"serverNodeId",label:"Server_node_id",width:"150px"},{prop:"processorType",label:"Type",width:"100px"},{prop:"status",label:"Status",width:"110px"},{prop:"commandEndpoint",label:"Command_endpoint",width:"180px"},{prop:"transferEndpoint",label:"Transfer_endpoint",width:"170px"},{prop:"pid",label:"Pid"},{prop:"updatedAt",label:"UpdatedAt",width:"170px"},{prop:"processorOption",label:"Processor_option",width:"690px"}];let m="";function A(d){v.value=!0,m=typeof d=="string"?m:d.row.sessionId,q({sessionId:m}).then(t=>{t.code===0&&(C.value=t.data.map(l=>(l.updatedAt=f(l.updatedAt),l.createdAt=f(l.createdAt),l)))})}function P(){A(m)}function R(){v.value=!1}function L(){i.page=1,i.pageSize=10,o.createTime="",o.sessionId="",o.status="",_()}function _(){let d={page:i.page,pageSize:i.pageSize,sessionId:o.sessionId,status:o.status,createAt:o.createTime?f(o.createTime,"YYYY-MM-DD"):""};K(d).then(t=>{t.code===0&&(E.value=t.total,I.value=t.data.map(l=>(l.updatedAt=f(l.updatedAt),l.createdAt=f(l.createdAt),l)))})}return F(()=>{_()}),(d,t)=>{const l=p("el-input"),g=p("el-form-item"),r=p("el-option"),N=p("el-select"),U=p("el-date-picker"),b=p("el-button"),M=p("el-form"),u=p("el-table-column"),O=p("el-table"),W=p("el-pagination");return $(),j("div",X,[e(M,{model:o,class:"search-from"},{default:a(()=>[e(g,{label:"Session ID"},{default:a(()=>[e(l,{modelValue:o.sessionId,"onUpdate:modelValue":t[0]||(t[0]=s=>o.sessionId=s)},null,8,["modelValue"])]),_:1}),e(g,{label:"Status"},{default:a(()=>[e(N,{modelValue:o.status,"onUpdate:modelValue":t[1]||(t[1]=s=>o.status=s)},{default:a(()=>[e(r,{value:"NEW"},{default:a(()=>[n("NEW")]),_:1}),e(r,{value:"NEW_TIMEOUT"},{default:a(()=>[n("NEW_TIMEOUT")]),_:1}),e(r,{value:"ACTIVE"},{default:a(()=>[n("ACTIVE")]),_:1}),e(r,{value:"CLOSED"},{default:a(()=>[n("CLOSED")]),_:1}),e(r,{value:"KILLED"},{default:a(()=>[n("KILLED")]),_:1}),e(r,{value:"ERROR"},{default:a(()=>[n("ERROR")]),_:1}),e(r,{value:"FINISHED"},{default:a(()=>[n("FINISHED")]),_:1}),e(r,{value:"PREPARE"},{default:a(()=>[n("PREPARE")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"CreatedAt"},{default:a(()=>[e(U,{modelValue:o.createTime,"onUpdate:modelValue":t[2]||(t[2]=s=>o.createTime=s),type:"date",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(g,null,{default:a(()=>[e(b,{type:"primary",onClick:w},{default:a(()=>[n("Search")]),_:1}),e(b,{type:"primary",onClick:L},{default:a(()=>[n("Refresh")]),_:1})]),_:1})]),_:1},8,["model"]),H("div",Z,[e(O,{data:I.value},{default:a(()=>[e(u,{prop:"sessionId",label:"Session Id",width:"390px"}),e(u,{prop:"name",label:"name"}),e(u,{prop:"totalProcCount",label:"Total"}),e(u,{prop:"activeProcCount",label:"ActionTotal"}),e(u,{prop:"status",label:"Status"}),e(u,{prop:"createdAt",label:"CreatedAt"}),e(u,{prop:"updatedAt",label:"UpdatedAt"}),e(u,{fixed:"right",label:"Action",width:"180"},{default:a(s=>[e(b,{link:"",type:"primary",onClick:Y=>A(s)},{default:a(()=>[n("processor信息")]),_:2},1032,["onClick"]),e(b,{link:"",type:"primary",onClick:Y=>y(s.row)},{default:a(()=>[n("kill")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(W,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":S.value,"onUpdate:currentAge":t[3]||(t[3]=s=>S.value=s),"page-size":h.value,"onUpdate:pageSize":t[4]||(t[4]=s=>h.value=s),"page-sizes":[10,15,30,50],total:E.value,onSizeChange:V,onCurrentChange:k},null,8,["current-age","page-size","total"])]),e(Q,{title:z.value,dialogVisible:v.value,tableData:C.value,tableLabel:D,onUpdateVisiable:R,onRefresh:P},null,8,["title","dialogVisible","tableData"])])}}});const le=J(ee,[["__scopeId","data-v-df884d58"]]);export{le as default};
