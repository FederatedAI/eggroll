import{d as H,j as _,r as A,k as K,a as i,c as j,b as v,f as e,w as o,E as b,G as W,o as $,g as p,H as J,I as C,J as q,_ as Q}from"./index-9c33e607.js";import{d as X}from"./dialogTable-8fabd64d.js";const Z={class:"section"},ee={class:"section-table"},te={class:"form-table"},ae={class:"action-btn"},oe={class:"table"},le=H({__name:"index",setup(se){const h=_([]),u=A({page:1,pageSize:10});function k(l){return!["RUNNING"].includes(l.status)}function y(l){J({processorId:l.processorId}).then(t=>{t.code===0?(C.success(t.msg||t.data),m()):C.success(t.msg)})}const a=A({pid:"",sessionId:"",status:"",createTime:""}),N=_(1),S=_(10),x=_(0);function E(l){u.pageSize=l,m()}function P(l){u.page=l,m()}function R(){u.page=1,u.pageSize=10,m()}function T(){a.createTime="",a.pid="",a.sessionId="",a.status="",u.page=1,u.pageSize=10,m()}function m(){let l={pageNum:u.page,pageSize:u.pageSize,pid:a.pid?Number(a.pid):"",sessionId:a.sessionId,createAt:a.createTime?b(a.createTime,"YYYY-MM-DD"):"",status:a.status};W(l).then(t=>{t.code===0&&(x.value=t.total,h.value=t.data.map(d=>(d.updatedAt=b(d.updatedAt),d.createdAt=b(d.createdAt),d)))})}const z=_("Resource List"),I=_(!1),w=_([]),D=[{prop:"processorId",label:"Processor Id"},{prop:"sessionId",label:"Session Id"},{prop:"serverNodeId",label:"Server_node_id"},{prop:"resourceType",label:"Type"},{prop:"status",label:"Status"},{prop:"allocated",label:"Allocated"},{prop:"extention",label:"Extention"},{prop:"pid",label:"Pid"},{prop:"createdAt",label:"CreatedAt"},{prop:"updatedAt",label:"UpdatedAt"}];let c={sessionId:"",serverNodeId:""};function V(l){I.value=!0,c.sessionId=l.row===void 0?c.sessionId:l.row.sessionId,c.serverNodeId=l.row===void 0?c.serverNodeId:l.row.serverNodeId;let t={sessionId:c.sessionId,serverNodeId:c.serverNodeId};q(t).then(d=>{d.code===0&&(w.value=d.data.map(r=>(r.updatedAt=b(r.updatedAt),r.createdAt=b(r.createdAt),r)))})}function U(){V(c)}function L(){I.value=!1}return K(()=>{m()}),(l,t)=>{const d=i("el-input"),r=i("el-form-item"),f=i("el-option"),M=i("el-select"),O=i("el-date-picker"),g=i("el-button"),G=i("el-form"),n=i("el-table-column"),Y=i("el-table"),B=i("el-pagination");return $(),j("section",Z,[v("div",ee,[v("div",te,[e(G,{model:a,class:"search-from"},{default:o(()=>[e(r,{label:"Pid",class:"input-width"},{default:o(()=>[e(d,{modelValue:a.pid,"onUpdate:modelValue":t[0]||(t[0]=s=>a.pid=s),modelModifiers:{trim:!0},clearable:""},null,8,["modelValue"])]),_:1}),e(r,{label:"Session ID",class:"input-width"},{default:o(()=>[e(d,{modelValue:a.sessionId,"onUpdate:modelValue":t[1]||(t[1]=s=>a.sessionId=s),modelModifiers:{trim:!0},clearable:""},null,8,["modelValue"])]),_:1}),e(r,{label:"Status"},{default:o(()=>[e(M,{modelValue:a.status,"onUpdate:modelValue":t[2]||(t[2]=s=>a.status=s),clearable:"",filterable:""},{default:o(()=>[e(f,{value:"NEW"},{default:o(()=>[p("NEW")]),_:1}),e(f,{value:"RUNNING"},{default:o(()=>[p("RUNNING")]),_:1}),e(f,{value:"STOPPED"},{default:o(()=>[p("STOPPED")]),_:1}),e(f,{value:"KILLED"},{default:o(()=>[p("KILLED")]),_:1}),e(f,{value:"ERROR"},{default:o(()=>[p("ERROR")]),_:1}),e(f,{value:"FINISHED"},{default:o(()=>[p("FINISHED")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,{label:"CreatedAt"},{default:o(()=>[e(O,{modelValue:a.createTime,"onUpdate:modelValue":t[3]||(t[3]=s=>a.createTime=s),style:{width:"100%"}},null,8,["modelValue"])]),_:1}),v("div",ae,[e(g,{type:"primary",onClick:R},{default:o(()=>[p("Search")]),_:1}),e(g,{type:"primary",onClick:T},{default:o(()=>[p("Refresh")]),_:1})])]),_:1},8,["model"]),v("div",oe,[e(Y,{data:h.value,"max-height":"750px"},{default:o(()=>[e(n,{prop:"processorId",fixed:"left",label:"Processor_id",width:"140px"}),e(n,{prop:"sessionId",label:"Session Id",width:"390px"}),e(n,{prop:"pid",label:"Pid"}),e(n,{prop:"serverNodeId",label:"Server_node_id",width:"190px"}),e(n,{prop:"processorType",label:"Type",width:"110px"}),e(n,{prop:"status",label:"Status",width:"120px"}),e(n,{prop:"commandEndpoint",label:"Command_endpoint",width:"190px"}),e(n,{prop:"transferEndpoint",label:"Transfer_endpoin",width:"190px"}),e(n,{prop:"processorOption",label:"Processor_option",width:"500px"}),e(n,{prop:"createdAt",label:"CreatedAt",width:"180"}),e(n,{fixed:"right",label:"Action",width:"180"},{default:o(s=>[e(g,{link:"",type:"primary",onClick:F=>V(s)},{default:o(()=>[p("resource信息")]),_:2},1032,["onClick"]),e(g,{link:"",type:"primary",disabled:k(s.row),onClick:F=>y(s.row)},{default:o(()=>[p("kill")]),_:2},1032,["disabled","onClick"])]),_:1})]),_:1},8,["data"]),e(B,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":N.value,"onUpdate:currentAge":t[4]||(t[4]=s=>N.value=s),"page-size":S.value,"onUpdate:pageSize":t[5]||(t[5]=s=>S.value=s),"page-sizes":[5,10,20,50],total:x.value,onSizeChange:E,onCurrentChange:P},null,8,["current-age","page-size","total"])])])]),e(X,{title:z.value,dialogVisible:I.value,tableData:w.value,tableLabel:D,onUpdateVisiable:L,onRefresh:U},null,8,["title","dialogVisible","tableData"])])}}});const re=Q(le,[["__scopeId","data-v-8df48c0f"]]);export{re as default};
