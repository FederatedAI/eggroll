import{d as F,j as _,r as w,k as H,b as i,c as K,g as e,w as o,e as j,E as b,G as W,o as $,h as p,H as J,I as A,J as q,_ as Q}from"./index-bb41d397.js";import{d as X}from"./dialogTable-dec50cfc.js";const Z={class:"section"},ee={class:"table"},te=F({__name:"index",setup(ae){const I=_([]),u=w({page:1,pageSize:10});function C(l){return!["RUNNING"].includes(l.status)}function k(l){J({processorId:l.processorId}).then(t=>{t.code===0?(A.success(t.msg||t.data),m()):A.success(t.msg)})}const a=w({pid:"",sessionId:"",status:"",createTime:""}),S=_(1),N=_(10),h=_(0);function y(l){u.pageSize=l,m()}function E(l){u.page=l,m()}function P(){u.page=1,u.pageSize=10,m()}function R(){a.createTime="",a.pid="",a.sessionId="",a.status="",u.page=1,u.pageSize=10,m()}function m(){let l={page:u.page,pageSize:u.pageSize,pid:a.pid?Number(a.pid):"",sessionId:a.sessionId,createAt:a.createTime?b(a.createTime,"YYYY-MM-DD"):"",status:a.status};W(l).then(t=>{t.code===0&&(h.value=t.total,I.value=t.data.map(d=>(d.updatedAt=b(d.updatedAt),d.createdAt=b(d.createdAt),d)))})}const T=_("Resource List"),v=_(!1),x=_([]),z=[{prop:"processorId",label:"Processor Id"},{prop:"sessionId",label:"Session Id"},{prop:"serverNodeId",label:"Server_node_id"},{prop:"resourceType",label:"Type"},{prop:"status",label:"Status"},{prop:"allocated",label:"Allocated"},{prop:"extention",label:"Extention"},{prop:"pid",label:"Pid"},{prop:"createdAt",label:"CreatedAt"},{prop:"updatedAt",label:"UpdatedAt"}];let c={sessionId:"",serverNodeId:""};function V(l){v.value=!0,c.sessionId=l.row===void 0?c.sessionId:l.row.sessionId,c.serverNodeId=l.row===void 0?c.serverNodeId:l.row.serverNodeId;let t={sessionId:c.sessionId,serverNodeId:c.serverNodeId};q(t).then(d=>{d.code===0&&(x.value=d.data.map(n=>(n.updatedAt=b(n.updatedAt),n.createdAt=b(n.createdAt),n)))})}function D(){V(c)}function U(){v.value=!1}return H(()=>{m()}),(l,t)=>{const d=i("el-input"),n=i("el-form-item"),f=i("el-option"),L=i("el-select"),O=i("el-date-picker"),g=i("el-button"),G=i("el-form"),r=i("el-table-column"),M=i("el-table"),Y=i("el-pagination");return $(),K("section",Z,[e(G,{model:a,class:"search-from"},{default:o(()=>[e(n,{label:"Pid"},{default:o(()=>[e(d,{modelValue:a.pid,"onUpdate:modelValue":t[0]||(t[0]=s=>a.pid=s),clearable:""},null,8,["modelValue"])]),_:1}),e(n,{label:"Session ID"},{default:o(()=>[e(d,{modelValue:a.sessionId,"onUpdate:modelValue":t[1]||(t[1]=s=>a.sessionId=s),clearable:""},null,8,["modelValue"])]),_:1}),e(n,{label:"Status"},{default:o(()=>[e(L,{modelValue:a.status,"onUpdate:modelValue":t[2]||(t[2]=s=>a.status=s),clearable:"",filterable:""},{default:o(()=>[e(f,{value:"NEW"},{default:o(()=>[p("NEW")]),_:1}),e(f,{value:"RUNNING"},{default:o(()=>[p("RUNNING")]),_:1}),e(f,{value:"STOPPED"},{default:o(()=>[p("STOPPED")]),_:1}),e(f,{value:"KILLED"},{default:o(()=>[p("KILLED")]),_:1}),e(f,{value:"ERROR"},{default:o(()=>[p("ERROR")]),_:1}),e(f,{value:"FINISHED"},{default:o(()=>[p("FINISHED")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"CreatedAt"},{default:o(()=>[e(O,{modelValue:a.createTime,"onUpdate:modelValue":t[3]||(t[3]=s=>a.createTime=s),style:{width:"100%"}},null,8,["modelValue"])]),_:1}),e(n,null,{default:o(()=>[e(g,{type:"primary",onClick:P},{default:o(()=>[p("Search")]),_:1}),e(g,{type:"primary",onClick:R},{default:o(()=>[p("Refresh")]),_:1})]),_:1})]),_:1},8,["model"]),j("div",ee,[e(M,{data:I.value},{default:o(()=>[e(r,{prop:"processorId",fixed:"left",label:"Processor_id",width:"140px"}),e(r,{prop:"sessionId",label:"Session Id",width:"390px"}),e(r,{prop:"pid",label:"Pid"}),e(r,{prop:"serverNodeId",label:"Server_node_id",width:"190px"}),e(r,{prop:"processorType",label:"Type",width:"110px"}),e(r,{prop:"status",label:"Status",width:"120px"}),e(r,{prop:"commandEndpoint",label:"Command_endpoint",width:"190px"}),e(r,{prop:"transferEndpoint",label:"Transfer_endpoin",width:"190px"}),e(r,{prop:"processorOption",label:"Processor_option",width:"500px"}),e(r,{prop:"createdAt",label:"CreatedAt",width:"180"}),e(r,{fixed:"right",label:"Action",width:"180"},{default:o(s=>[e(g,{link:"",type:"primary",onClick:B=>V(s)},{default:o(()=>[p("resource信息")]),_:2},1032,["onClick"]),e(g,{link:"",type:"primary",disabled:C(s.row),onClick:B=>k(s.row)},{default:o(()=>[p("kill")]),_:2},1032,["disabled","onClick"])]),_:1})]),_:1},8,["data"]),e(Y,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":S.value,"onUpdate:currentAge":t[4]||(t[4]=s=>S.value=s),"page-size":N.value,"onUpdate:pageSize":t[5]||(t[5]=s=>N.value=s),"page-sizes":[5,10,20,50],total:h.value,onSizeChange:y,onCurrentChange:E},null,8,["current-age","page-size","total"]),e(X,{title:T.value,dialogVisible:v.value,tableData:x.value,tableLabel:z,onUpdateVisiable:U,onRefresh:D},null,8,["title","dialogVisible","tableData"])])])}}});const se=Q(te,[["__scopeId","data-v-e7d40dca"]]);export{se as default};
