import{d as O,j as l,r as P,k as q,a as f,c as J,b as p,f as a,w as i,F as Q,z as W,E as u,N as L,o as X,g as j,p as Y,n as Z,O as ee,_ as ae}from"./index-9c33e607.js";import{d as te}from"./dialogTable-8fabd64d.js";const D=v=>(Y("data-v-107c3e09"),v=v(),Z(),v),oe={class:"section"},le={class:"section-table"},de={class:"form-table h-top"},ne=D(()=>p("h4",{class:"title"},"Server_node",-1)),re={class:"table"},pe={class:"mt-16 form-table h-botton"},se=D(()=>p("h4",{class:"title"},"Node_resource",-1)),ie={class:"table"},ue=O({__name:"index",setup(v){const m=l([]),A=l([]),g=P({page:1,pageSize:5}),b=P({page:1,pageSize:5}),w=l(1),z=l(5),y=l(1),N=l(5),I=l(0),k=l(0);function $(o){g.pageSize=o,h()}function B(o){g.page=o,h()}function E(o){b.pageSize=o,x()}function F(o){b.page=o,x()}function h(){let o={pageNum:g.page,pageSize:g.pageSize};W(o).then(t=>{t.code===0&&(I.value=t.total,m.value=t.data.map(e=>(e.updatedAt=u(e.updatedAt),e.createdAt=u(e.createdAt),e)))})}function x(){let o={pageNum:b.page,pageSize:b.pageSize};L(o).then(t=>{t.code===0&&(k.value=t.total,A.value=t.data.map(e=>(e.updatedAt=u(e.updatedAt),e.createdAt=u(e.createdAt),e)))})}const S=l("Resource List"),_=l(!1),s=l([]),C=l([]),c=l("");function G(o){s.value=s.value.filter(t=>t.key.includes(o))}function T(o){C.value=[{prop:"key",label:"Key"},{prop:"value",label:"Value"}],n.value=typeof o!="object"?n.value:o.serverNodeId,S.value=`serverNodeId: ${n.value}`,ee({serverNodeId:n.value}).then(t=>{if(t.code===0){_.value=!0,c.value="config",s.value=[];for(let e in t.data)s.value.push({key:e,value:t.data[e]})}})}let n=l("");function R(o){n.value=typeof o!="object"?n.value:o.serverNodeId;let t={serverNodeId:n.value};C.value=[{prop:"resourceType",label:"ResourceType"},{prop:"total",label:"Total"},{prop:"used",label:"Used"},{prop:"allocated",label:"Allocated"},{prop:"status",label:"Status"},{prop:"createdAt",label:"CreatedAt"}],S.value=`serverNodeId: ${n.value}`,L(t).then(e=>{e.code===0&&(c.value="",_.value=!0,s.value=e.data.map(r=>(r.updatedAt=u(r.updatedAt),r.createdAt=u(r.createdAt),r)))})}function H(){c.value==="config"?T(n.value):R(n.value)}function K(){_.value=!1}return q(()=>{x(),h()}),(o,t)=>{const e=f("el-table-column"),r=f("el-button"),U=f("el-table"),V=f("el-pagination");return X(),J(Q,null,[p("section",oe,[p("div",le,[p("div",de,[ne,p("div",re,[a(U,{data:m.value,"max-height":"300"},{default:i(()=>[a(e,{prop:"serverNodeId",fixed:"left",label:"Server_node_id"}),a(e,{prop:"name",label:"Name",width:"100px"}),a(e,{prop:"serverClusterId",width:"150px",label:"Server_cluster_id"}),a(e,{prop:"host",label:"Host",width:"120px"}),a(e,{prop:"port",label:"Port",width:"120px"}),a(e,{prop:"nodeType",label:"Type",width:"150px"}),a(e,{prop:"status",label:"Status",width:"120px"}),a(e,{prop:"createdAt",label:"CreatedAt",width:"170"}),a(e,{prop:"updatedAt",label:"UpdatedAt",width:"170"}),a(e,{fixed:"right",label:"Config",width:"120"},{default:i(d=>[a(r,{link:"",type:"primary",onClick:M=>T(d.row)},{default:i(()=>[j("Get Config")]),_:2},1032,["onClick"])]),_:1}),a(e,{fixed:"right",label:"Resource",width:"120"},{default:i(d=>[a(r,{link:"",type:"primary",onClick:M=>R(d.row)},{default:i(()=>[j("Get Resource")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),a(V,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":w.value,"onUpdate:currentAge":t[0]||(t[0]=d=>w.value=d),"page-size":z.value,"onUpdate:pageSize":t[1]||(t[1]=d=>z.value=d),"page-sizes":[5,10,20,50],total:I.value,onSizeChange:$,onCurrentChange:B},null,8,["current-age","page-size","total"])])]),p("div",pe,[se,p("div",ie,[a(U,{data:A.value,"max-height":"350"},{default:i(()=>[a(e,{prop:"resourceId",fixed:"left",label:"Resource_id",width:"120px"}),a(e,{prop:"serverNodeId",fixed:"left",label:"Server_node_id",width:"150px"}),a(e,{prop:"resourceType",label:"Resource_type",width:"150px"}),a(e,{prop:"total",label:"Total"}),a(e,{prop:"used",label:"Used",width:"180px"}),a(e,{prop:"allocated",label:"Allocated",width:"150px"}),a(e,{prop:"status",label:"Status",width:"150px"}),a(e,{prop:"extention",label:"Extention",width:"180px"}),a(e,{prop:"createdAt",label:"CreatedAt",width:"180"}),a(e,{prop:"updatedAt",label:"UpdatedAt",width:"180"})]),_:1},8,["data"]),a(V,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":y.value,"onUpdate:currentAge":t[2]||(t[2]=d=>y.value=d),"page-size":N.value,"onUpdate:pageSize":t[3]||(t[3]=d=>N.value=d),"page-sizes":[5,10,20,50],total:k.value,onSizeChange:E,onCurrentChange:F},null,8,["current-age","page-size","total"])])])])]),a(te,{title:S.value,dialogVisible:_.value,tableData:s.value,tableLabel:C.value,width:c.value==="config"?"50%":"90%",needSearch:c.value==="config",onUpdateVisiable:K,onRefresh:H,onSearchConfig:G},null,8,["title","dialogVisible","tableData","tableLabel","width","needSearch"])],64)}}});const ge=ae(ue,[["__scopeId","data-v-107c3e09"]]);export{ge as default};
