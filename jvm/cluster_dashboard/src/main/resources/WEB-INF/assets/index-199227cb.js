import{d as H,n as _,r as V,o as W,b as d,e as $,f as b,i as e,j as l,Q as v,R as Q,c as q,k as p,S as J,T as y,U as X,_ as Z}from"./index-e87360db.js";import{d as ee}from"./dialogTable-93e56230.js";const te={class:"section"},ae={class:"section-table"},oe={class:"form-table"},le={class:"action-btn"},se={class:"table"},ne={class:"flex-page"},de=H({__name:"index",setup(re){const h=_([]),u=V({page:1,pageSize:20});function C(o){["e","E"].includes(o.key)&&o.preventDefault()}function k(o){return!["RUNNING"].includes(o.status)}function E(o){J({processorId:o.processorId}).then(t=>{t.code===0?(y.success(t.msg||t.data),f()):y.success(t.msg)})}const a=V({pid:null,sessionId:"",status:"",createTime:""}),S=_(1),w=_(20),N=_(0);function D(o){u.pageSize=o,f()}function R(o){u.page=o,f()}function T(){u.page=1,u.pageSize=20,f()}function P(){a.createTime="",a.pid=null,a.sessionId="",a.status="",u.page=1,u.pageSize=20,f()}function f(){let o={pageNum:u.page,pageSize:u.pageSize,pid:a.pid||"",sessionId:a.sessionId,createdAt:a.createTime?v(a.createTime,"YYYY-MM-DD"):"",status:a.status};Q(o).then(t=>{t.code===0&&(N.value=t.total,h.value=t.data.map(r=>(r.updatedAt=v(r.updatedAt),r.createdAt=v(r.createdAt),r)))})}const z=_("Resource List"),I=_(!1),x=_([]),U=[{prop:"processorId",label:"ProcessorId"},{prop:"sessionId",label:"SessionId"},{prop:"serverNodeId",label:"ServerNodeId"},{prop:"resourceType",label:"Type"},{prop:"status",label:"Status"},{prop:"allocated",label:"Allocated"},{prop:"extention",label:"Extention"},{prop:"pid",label:"Pid"},{prop:"createdAt",label:"CreatedAt"},{prop:"updatedAt",label:"UpdatedAt"}];let c={sessionId:"",serverNodeId:""};function A(o){I.value=!0,c.sessionId=o.row===void 0?c.sessionId:o.row.sessionId,c.serverNodeId=o.row===void 0?c.serverNodeId:o.row.serverNodeId;let t={sessionId:c.sessionId,serverNodeId:c.serverNodeId};X(t).then(r=>{r.code===0&&(x.value=r.data.map(i=>(i.updatedAt=v(i.updatedAt),i.createdAt=v(i.createdAt),i)))})}function L(){A(c)}function M(){I.value=!1}return W(()=>{f()}),(o,t)=>{const r=d("el-input-number"),i=d("el-form-item"),O=d("el-input"),m=d("el-option"),K=d("el-select"),B=d("el-date-picker"),g=d("el-button"),Y=d("el-form"),n=d("el-table-column"),F=d("el-table"),G=d("el-pagination");return q(),$("section",te,[b("div",ae,[b("div",oe,[e(Y,{model:a,class:"search-from"},{default:l(()=>[e(i,{label:"Pid:",class:"input-width"},{default:l(()=>[e(r,{placeholder:"select pid",onKeydown:C,"value-on-clear":"null",modelValue:a.pid,"onUpdate:modelValue":t[0]||(t[0]=s=>a.pid=s),modelModifiers:{trim:!0},controls:!1},null,8,["modelValue"])]),_:1}),e(i,{label:"Session ID:",class:"input-width"},{default:l(()=>[e(O,{placeholder:"select session id",modelValue:a.sessionId,"onUpdate:modelValue":t[1]||(t[1]=s=>a.sessionId=s),modelModifiers:{trim:!0},clearable:""},null,8,["modelValue"])]),_:1}),e(i,{label:"Status:"},{default:l(()=>[e(K,{modelValue:a.status,"onUpdate:modelValue":t[2]||(t[2]=s=>a.status=s),placeholder:"select status",clearable:"",filterable:""},{default:l(()=>[e(m,{value:"NEW"},{default:l(()=>[p("NEW")]),_:1}),e(m,{value:"RUNNING"},{default:l(()=>[p("RUNNING")]),_:1}),e(m,{value:"STOPPED"},{default:l(()=>[p("STOPPED")]),_:1}),e(m,{value:"KILLED"},{default:l(()=>[p("KILLED")]),_:1}),e(m,{value:"ERROR"},{default:l(()=>[p("ERROR")]),_:1}),e(m,{value:"FINISHED"},{default:l(()=>[p("FINISHED")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"CreatedAt:"},{default:l(()=>[e(B,{placeholder:"select createdAt",modelValue:a.createTime,"onUpdate:modelValue":t[3]||(t[3]=s=>a.createTime=s),style:{width:"100%"}},null,8,["modelValue"])]),_:1}),b("div",le,[e(g,{type:"primary",onClick:T},{default:l(()=>[p("Search")]),_:1}),e(g,{type:"primary",onClick:P},{default:l(()=>[p("Refresh")]),_:1})])]),_:1},8,["model"]),b("div",se,[e(F,{data:h.value,"max-height":"745px"},{default:l(()=>[e(n,{prop:"processorId",fixed:"left",label:"ProcessorId",width:"140px"}),e(n,{prop:"sessionId","show-overflow-tooltip":"",label:"SessionId",width:"300px"}),e(n,{prop:"pid",label:"Pid"}),e(n,{prop:"serverNodeId",label:"ServerNodeId",width:"150px"}),e(n,{prop:"processorType",label:"Type",width:"110px"}),e(n,{prop:"status",label:"Status",width:"120px"}),e(n,{prop:"beforeStatus",label:"BeforeStatus",width:"130px"}),e(n,{prop:"commandEndpoint",label:"CommandEndpoint",width:"190px"}),e(n,{prop:"transferEndpoint",label:"TransferEndpoin",width:"190px"}),e(n,{prop:"processorOption","show-overflow-tooltip":"",label:"ProcessorOption",width:"400px"}),e(n,{prop:"createdAt",label:"CreatedAt",width:"180"}),e(n,{fixed:"right",label:"Action",width:"180"},{default:l(s=>[e(g,{link:"",type:"primary",onClick:j=>A(s)},{default:l(()=>[p("resource信息")]),_:2},1032,["onClick"]),e(g,{link:"",type:"primary",disabled:k(s.row),onClick:j=>E(s.row)},{default:l(()=>[p("kill")]),_:2},1032,["disabled","onClick"])]),_:1})]),_:1},8,["data"]),b("div",ne,[e(G,{class:"pt-16",background:"",layout:"total, sizes, prev, pager, next, jumper","current-age":S.value,"onUpdate:currentAge":t[4]||(t[4]=s=>S.value=s),"page-size":w.value,"onUpdate:pageSize":t[5]||(t[5]=s=>w.value=s),"page-sizes":[10,20,30,50],total:N.value,onSizeChange:D,onCurrentChange:R},null,8,["current-age","page-size","total"])])])])]),e(ee,{title:z.value,dialogVisible:I.value,tableData:x.value,tableLabel:U,onUpdateVisiable:M,onRefresh:L},null,8,["title","dialogVisible","tableData"])])}}});const ue=Z(de,[["__scopeId","data-v-b0db13e7"]]);export{ue as default};
